<style>
    #map {
        border: 3px solid #000;
        width: 100%;
        height: 400px;
    }
</style>

<div id='map' class="container">
    <script type="text/javascript">
        var map;
        <% if @sensors.size > 0 %>
            map = L.map('map').setView([<%=@sensors[0].latitude%>, <%=@sensors[0].longitude%>], 13);
        <% else %>
            map = L.map('map').setView([<%="44.83377627198407,11.598755176671702"%>], 13);
        <% end %>

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        <% @sensors.each do |sensor| %>
        L.marker([<%=sensor.latitude%>, <%=sensor.longitude%>]).addTo(map)
                .bindPopup('<%=sensor.URI%>')
                .openPopup();
        <% end %>
    </script>
</div>